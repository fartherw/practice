{"ast":null,"code":"import _ from \"@/assets/utils\";\nexport default {\n  name: \"recommend-setting\",\n  data() {\n    return {\n      imageUrl: \"\",\n      token: _.storage.get('tk')\n    };\n  },\n  methods: {\n    //:on-success=\"uploadSuccess\"\n    uploadSuccess(response) {\n      //response响应主体信息\n      let {\n        resultCode,\n        data\n      } = response;\n      if (+resultCode === 200) {\n        this.imageUrl = data;\n        return;\n      }\n      this.$message.error('上传失败!@_@');\n    },\n    beforUpload(file) {\n      // return false/true 控制是否继续上传\n      if (file.size > 1024) {\n        this.$message.warning('上传文件不能超过10KB');\n        return false;\n      }\n      return true;\n    },\n    async myupload(config) {\n      //自己方式长传\n\n      let file = config.file;\n      let {\n        resultCode,\n        data\n      } = await this.$api.upload(file);\n      if (+resultCode === 200) {\n        this.imageUrl = data;\n        return;\n      }\n      this.$message.error('上传失败');\n    }\n  }\n};","map":{"version":3,"mappings":"AAWA;AACA;EACAA;EACAC;IACA;MACAC;MACAC;IACA;EACA;EACAC;IACA;IACAC;MACA;MACA;QAAAC;QAAAL;MAAA;MACA;QACA;QACA;MACA;MACA;IACA;IACAM;MACA;MACA;QACA;QACA;MACA;MACA;IACA;IACA;MACA;;MAEA;MACA;QAAAD;QAAAL;MAAA;MACA;QACA;QACA;MACA;MACA;IACA;EACA;AACA","names":["name","data","imageUrl","token","methods","uploadSuccess","resultCode","beforUpload"],"sourceRoot":"src/views/Home","sources":["RecommendSetting.vue"],"sourcesContent":["<template>\r\n  <div class=\"recommend-setting\">\r\n    <el-upload action=\"\" :show-file-list=\"false\" accept=\".jpg,.jpeg,.png,.gif\" :before-upload=\"beforUpload\"\r\n      :http-request=\"myupload\">\r\n      <img v-if=\"imageUrl\" :src=\"imageUrl\" class=\"avatar\">\r\n      <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n    </el-upload>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport _ from \"@/assets/utils\"\r\nexport default {\r\n  name: \"recommend-setting\",\r\n  data() {\r\n    return {\r\n      imageUrl: \"\",\r\n      token: _.storage.get('tk'),\r\n    }\r\n  },\r\n  methods: {\r\n    //:on-success=\"uploadSuccess\"\r\n    uploadSuccess(response) {\r\n      //response响应主体信息\r\n      let { resultCode, data } = response;\r\n      if (+resultCode === 200) {\r\n        this.imageUrl = data;\r\n        return;\r\n      }\r\n      this.$message.error('上传失败!@_@')\r\n    },\r\n    beforUpload(file) {\r\n      // return false/true 控制是否继续上传\r\n      if (file.size > 1024) {\r\n        this.$message.warning('上传文件不能超过10KB');\r\n        return false;\r\n      }\r\n      return true;\r\n    },\r\n    async myupload(config) {\r\n      //自己方式长传\r\n\r\n      let file = config.file;\r\n      let { resultCode, data } = await this.$api.upload(file);\r\n      if (+resultCode === 200) {\r\n        this.imageUrl = data;\r\n        return;\r\n      }\r\n      this.$message.error('上传失败')\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}