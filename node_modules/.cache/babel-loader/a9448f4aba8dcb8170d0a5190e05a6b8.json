{"ast":null,"code":"// import _ from \"@/assets/utils\"\nexport default {\n  name: \"goods-setting\",\n  data() {\n    // const validateRedirect = (_, value, callback) => {\n    //   if (!value) return callback(new Error('地址不能为空'));\n    //   let reg = /^(((ht|f)tps?):\\/\\/)?([^!@#$%^&*?.\\s-]([^!@#$%^&*?.\\s]{0,63}[^!@#$%^&*?.\\s])?\\.)+[a-z]{2,6}\\/?/;\n    //   if (!reg.test(value)) return callback(new Error('地址格式不正确！'));\n    //   callback();\n    // };\n    // const validateRank = (_, value, callback) => {\n    //   if (!value) return callback(new Error('排序值不能为空'));\n    //   let reg = /^\\d+$/;\n    //   if (!reg.test(value) || value < 1 || value > 200) return callback(new Error('排序值是1~200之间的整数'));\n    //   callback();\n    // }\n    return {\n      //关于表格区域的\n      tableData: [],\n      tableLoading: false,\n      pageSize: 10,\n      total: 0,\n      currentPage: 1,\n      configType: 1,\n      selection: [],\n      //Dialog表单相关的\n      dialogVisible: false,\n      carouselId: null\n      // ruleFrom: {\n      //   carouselUrl: '',\n      //   redirectUrl: 'https://www.baidu.com',\n      //   carouselRank: 1\n      // },\n      // rules: {\n      //   carouselUrl: [{ required: true, message: '图片不能为空', trigger: 'blur' }],\n      //   redirectUrl: [{ required: true, validator: validateRedirect, trigger: 'blur' }],\n      //   carouselRank: [{ required: true, validator: validateRank, trigger: 'blur' }],\n      // },\n    };\n  },\n\n  created() {\n    this.init();\n  },\n  methods: {\n    async init() {\n      try {\n        let {\n          resultCode,\n          data\n        } = await this.$api.GoodsSetting.queryList(this.currentPage, this.pageSize);\n        if (+resultCode === 200) {\n          let {\n            totalCount,\n            list\n          } = data;\n          this.total = +totalCount;\n          this.tableData = list;\n        }\n      } catch (_) {\n        console.log('错误：', _);\n      }\n    }\n  }\n};","map":{"version":3,"mappings":"AAkEA;AACA;EACAA;EACAC;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACA;MACAC;MACAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;EACA;;EACAC;IACA;EACA;EACAC;IACA;MACA;QACA;UAAAC;UAAAZ;QAAA;QACA;UACA;YAAAa;YAAAC;UAAA;UACA;UACA;QACA;MACA;QACAC;MACA;IACA;EACA;AAEA","names":["name","data","tableData","tableLoading","pageSize","total","currentPage","configType","selection","dialogVisible","carouselId","created","methods","resultCode","totalCount","list","console"],"sourceRoot":"src/views/Home","sources":["GoodsSetting.vue"],"sourcesContent":["<template>\r\n  <div class=\"goods-setting\">\r\n    <div class=\"app\">\r\n      <!-- 操控区 -->\r\n      <div class=\"handler-box\">\r\n        <el-button type=\"primary\" icon=\"el-icon-plus\" size=\"small\" @click=\"dialogVisible = true\">\r\n          新增\r\n        </el-button>\r\n\r\n        <el-popconfirm title=\"确定要删除这些选中的数据吗？\">\r\n          <el-button type=\"danger\" icon=\"el-icon-delete\" size=\"small\" slot=\"reference\">\r\n            批量删除\r\n          </el-button>\r\n        </el-popconfirm>\r\n      </div>\r\n\r\n      <!-- 表格区 -->\r\n      <el-table :data=\"tableData\" stripe style=\"width: 100%\">\r\n        <el-table-column type=\"selection\" width=\"55\">\r\n        </el-table-column>\r\n        <el-table-column prop=\"configName\" label=\"商品名称\" min-width=\"15%\" align=\"center\"></el-table-column>\r\n        <el-table-column prop=\"redirectUrl\" label=\"跳转连接\" min-width=\"20%\" ></el-table-column>\r\n        <el-table-column prop=\"configRank\" label=\"排序值\" min-width=\"10%\"></el-table-column>\r\n        <el-table-column prop=\"goodsId\" label=\"商品编号\" min-width=\"15%\" align=\"center\"></el-table-column>\r\n        <el-table-column prop=\"createTime\" label=\"添加时间\" min-width=\"15%\"></el-table-column>\r\n        <el-table-column prop=\"address\" label=\"操作\" min-width=\"20%\">\r\n\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n\r\n\r\n      <!-- 分页区 -->\r\n      <el-pagination background layout=\"prev, pager, next\" :hide-on-single-page=\"true\" :page-size=\"pageSize\"\r\n        :total=\"total\" :current-page=\"currentPage\"></el-pagination>\r\n\r\n      <!-- 新增/修改 -->\r\n      <!-- <el-dialog width=\"30%\" :title=\"`${carouselId ? '修改' : '添加'}轮播图`\" :visible=\"dialogVisible\"\r\n        :close-on-click-modal=\"false\" :close-on-press-escape=\"false\" :before-close=\"closeDialog\">\r\n        <el-form label-width=\"100px\" :rules=\"rules\" :model=\"ruleFrom\" ref=\"fromIns\">\r\n          <el-form-item label=\"轮播图图片\" prop=\"carouselUrl\">\r\n            <el-upload class=\"avatar-uploader\" action=\"\" accept=\".jpg,.jpeg,.png,.gif\" :show-file-list=\"false\"\r\n              :multiple=\"false\" :http-request=\"uploadImg\">\r\n\r\n              <img src=\"ruleFrom.carouselUrl\" class=\"avatar-uploader-img\" alt=\"\" />\r\n              <i ></i>\r\n            </el-upload>\r\n          </el-form-item>\r\n          <el-form-item label=\"跳转连接\" prop=\"redirectUrl\">\r\n            <el-input v-model.trim=\"ruleFrom.redirectUrl\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"排序值\" prop=\"carouselRank\">\r\n            <el-input-number v-model.trim=\"ruleFrom.carouselRank\"></el-input-number>\r\n          </el-form-item>\r\n        </el-form>\r\n        <template #footer>\r\n          <my-button type=\"primary\" @click=\"submit\">确认提交信息</my-button>\r\n          <el-button @click=\"closeDialog\">取消</el-button>\r\n        </template>\r\n      </el-dialog> -->\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// import _ from \"@/assets/utils\"\r\nexport default {\r\n  name: \"goods-setting\",\r\n  data() {\r\n    // const validateRedirect = (_, value, callback) => {\r\n    //   if (!value) return callback(new Error('地址不能为空'));\r\n    //   let reg = /^(((ht|f)tps?):\\/\\/)?([^!@#$%^&*?.\\s-]([^!@#$%^&*?.\\s]{0,63}[^!@#$%^&*?.\\s])?\\.)+[a-z]{2,6}\\/?/;\r\n    //   if (!reg.test(value)) return callback(new Error('地址格式不正确！'));\r\n    //   callback();\r\n    // };\r\n    // const validateRank = (_, value, callback) => {\r\n    //   if (!value) return callback(new Error('排序值不能为空'));\r\n    //   let reg = /^\\d+$/;\r\n    //   if (!reg.test(value) || value < 1 || value > 200) return callback(new Error('排序值是1~200之间的整数'));\r\n    //   callback();\r\n    // }\r\n    return {\r\n      //关于表格区域的\r\n      tableData: [],\r\n      tableLoading: false,\r\n      pageSize: 10,\r\n      total: 0,\r\n      currentPage: 1,\r\n      configType: 1,\r\n      selection: [],\r\n      //Dialog表单相关的\r\n      dialogVisible: false,\r\n      carouselId: null,\r\n      // ruleFrom: {\r\n      //   carouselUrl: '',\r\n      //   redirectUrl: 'https://www.baidu.com',\r\n      //   carouselRank: 1\r\n      // },\r\n      // rules: {\r\n      //   carouselUrl: [{ required: true, message: '图片不能为空', trigger: 'blur' }],\r\n      //   redirectUrl: [{ required: true, validator: validateRedirect, trigger: 'blur' }],\r\n      //   carouselRank: [{ required: true, validator: validateRank, trigger: 'blur' }],\r\n      // },\r\n    }\r\n  },\r\n  created() {\r\n    this.init();\r\n  },\r\n  methods: {\r\n    async init() {\r\n      try {\r\n        let { resultCode, data } = await this.$api.GoodsSetting.queryList(this.currentPage, this.pageSize);\r\n        if (+resultCode === 200) {\r\n          let { totalCount, list } = data;\r\n          this.total = +totalCount;\r\n          this.tableData = list;\r\n        }\r\n      } catch (_) {\r\n        console.log('错误：', _);\r\n      }\r\n    }\r\n  }\r\n\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.goods-setting {\r\n  position: relative;\r\n  box-sizing: border-box;\r\n  padding: 10px;\r\n  margin-bottom: 50px;\r\n  border-radius: 4px;\r\n  border: 1px solid #ebeef5;\r\n  background-color: #fff;\r\n  box-shadow: 0 2px 12px 0 rgb(0 0 0 / 10%);\r\n\r\n  .app {\r\n\r\n    .handler-box {\r\n      z-index: 999;\r\n      display: flex;\r\n      align-items: center;\r\n      box-sizing: border-box;\r\n      width: 100%;\r\n      height: 60px;\r\n      border-bottom: 1px solid #ebeef5;\r\n\r\n      .el-button {\r\n        margin-right: 10px;\r\n      }\r\n    }\r\n\r\n    .el-pagination {\r\n\r\n      z-index: 999;\r\n      display: flex;\r\n      align-items: center;\r\n      height: 40px;\r\n      margin-top: 20px;\r\n      justify-content: center;\r\n    }\r\n\r\n    .el-table {\r\n      box-sizing: border-box;\r\n      width: 100%;\r\n    }\r\n\r\n    .el-image {\r\n      display: block;\r\n      width: 50px;\r\n      height: 50px;\r\n    }\r\n\r\n    .el-link {\r\n      margin-right: 10px;\r\n    }\r\n\r\n    /deep/.el-dialog__body {\r\n      padding: 10px 20px;\r\n    }\r\n\r\n    /deep/.el-upload {\r\n      display: block;\r\n    }\r\n\r\n    .avatar-uploader-icon,\r\n    .avatar-uploader-img {\r\n      display: block;\r\n      box-sizing: border-box;\r\n      width: 120px;\r\n      height: 120px;\r\n      line-height: 120px;\r\n      font-size: 24px;\r\n      color: #8c939d;\r\n      border: 1px dashed #d9d9d9;\r\n      cursor: pointer;\r\n    }\r\n  }\r\n\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}